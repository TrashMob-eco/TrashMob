<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:controls="clr-namespace:TrashMobMobile.Controls"
             x:Class="TrashMobMobile.Views.EditEvent.TabDetails">
    <ScrollView>
        <VerticalStackLayout Spacing="0" Margin="0" Padding="0,8">

            <!-- Event Name -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4">
                <VerticalStackLayout Spacing="4" Margin="0">
                    <Label Style="{StaticResource FieldLabel}">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span Text="Event Name" />
                                <Span Text=" *" TextColor="{StaticResource Destructive}" />
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                    <controls:TMEntry Text="{Binding EventViewModel.Name}" />
                </VerticalStackLayout>
            </Border>

            <!-- Date & Time -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4">
                <VerticalStackLayout Spacing="8" Margin="0">
                    <HorizontalStackLayout Spacing="8">
                        <Image MaximumWidthRequest="20" MaximumHeightRequest="20" VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource FontFamily="{StaticResource GoogleMaterialIcons}"
                                                 Glyph="{StaticResource IconCalendarCheck}"
                                                 Size="20"
                                                 Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
                            </Image.Source>
                        </Image>
                        <Label Text="Date &amp; Time"
                               FontFamily="LexendSemibold"
                               FontSize="Small"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <Grid ColumnDefinitions="*, *" ColumnSpacing="12" RowDefinitions="Auto" Margin="0">
                        <VerticalStackLayout Grid.Column="0" Spacing="4" Margin="0">
                            <Label Style="{StaticResource FieldLabel}">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Date" />
                                        <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <controls:TMDatePicker Date="{Binding EventViewModel.EventDateOnly, Mode=TwoWay}" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" Spacing="4" Margin="0">
                            <Label Style="{StaticResource FieldLabel}">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Time" />
                                        <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <controls:TMTimePicker Time="{Binding EventViewModel.EventTime, Mode=TwoWay}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Duration -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4">
                <VerticalStackLayout Spacing="8" Margin="0">
                    <HorizontalStackLayout Spacing="8">
                        <Image MaximumWidthRequest="20" MaximumHeightRequest="20" VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource FontFamily="{StaticResource GoogleMaterialIcons}"
                                                 Glyph="{StaticResource IconTimerOutline}"
                                                 Size="20"
                                                 Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
                            </Image.Source>
                        </Image>
                        <Label Text="Duration"
                               FontFamily="LexendSemibold"
                               FontSize="Small"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <Grid ColumnDefinitions="*, *" ColumnSpacing="12" RowDefinitions="Auto" Margin="0">
                        <VerticalStackLayout Grid.Column="0" Spacing="4" Margin="0">
                            <Label Style="{StaticResource FieldLabel}">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Hours" />
                                        <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <controls:TMEntry Keyboard="Numeric" Text="{Binding EventViewModel.DurationHours}" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" Spacing="4" Margin="0">
                            <Label Style="{StaticResource FieldLabel}">
                                <Label.FormattedText>
                                    <FormattedString>
                                        <Span Text="Minutes" />
                                        <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                    </FormattedString>
                                </Label.FormattedText>
                            </Label>
                            <controls:TMEntry Keyboard="Numeric" Text="{Binding EventViewModel.DurationMinutes}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Description -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4">
                <VerticalStackLayout Spacing="4" Margin="0">
                    <HorizontalStackLayout Spacing="8">
                        <Image MaximumWidthRequest="20" MaximumHeightRequest="20" VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource FontFamily="{StaticResource GoogleMaterialIcons}"
                                                 Glyph="{StaticResource IconFileDocument}"
                                                 Size="20"
                                                 Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
                            </Image.Source>
                        </Image>
                        <Label Style="{StaticResource FieldLabel}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Description" />
                                    <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </HorizontalStackLayout>
                    <controls:TMEditor Text="{Binding EventViewModel.Description}" />
                </VerticalStackLayout>
            </Border>

            <!-- Event Settings -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4">
                <VerticalStackLayout Spacing="8" Margin="0">
                    <HorizontalStackLayout Spacing="8">
                        <Image MaximumWidthRequest="20" MaximumHeightRequest="20" VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource FontFamily="{StaticResource GoogleMaterialIcons}"
                                                 Glyph="{StaticResource IconTag}"
                                                 Size="20"
                                                 Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
                            </Image.Source>
                        </Image>
                        <Label Text="Event Settings"
                               FontFamily="LexendSemibold"
                               FontSize="Small"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <VerticalStackLayout Spacing="4" Margin="0">
                        <Label Style="{StaticResource FieldLabel}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Event Type" />
                                    <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                        <controls:TMPicker Title="Event Type" ItemsSource="{Binding ETypes}"
                                           SelectedItem="{Binding SelectedEventType, Mode=TwoWay}" />
                    </VerticalStackLayout>

                    <Grid ColumnDefinitions="*, *" ColumnSpacing="12" RowDefinitions="Auto" Margin="0">
                        <VerticalStackLayout Grid.Column="0" Spacing="4" Margin="0">
                            <Label Text="Max Attendees" Style="{StaticResource FieldLabel}" />
                            <controls:TMEntry Keyboard="Numeric" Text="{Binding EventViewModel.MaxNumberOfParticipants}" />
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" Spacing="4" Margin="0">
                            <Label Text="Visibility" Style="{StaticResource FieldLabel}" />
                            <controls:TMPicker Title="Visibility"
                                               ItemsSource="{Binding VisibilityOptions}"
                                               SelectedItem="{Binding SelectedVisibility, Mode=TwoWay}" />
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- Team (conditional) -->
            <Border Style="{StaticResource RoundBorder}" Margin="8,4"
                    IsVisible="{Binding IsTeamPickerVisible}">
                <VerticalStackLayout Spacing="4" Margin="0">
                    <HorizontalStackLayout Spacing="8">
                        <Image MaximumWidthRequest="20" MaximumHeightRequest="20" VerticalOptions="Center">
                            <Image.Source>
                                <FontImageSource FontFamily="{StaticResource GoogleMaterialIcons}"
                                                 Glyph="{StaticResource IconAccountMultiple}"
                                                 Size="20"
                                                 Color="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}" />
                            </Image.Source>
                        </Image>
                        <Label Style="{StaticResource FieldLabel}">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="Team" />
                                    <Span Text=" *" TextColor="{StaticResource Destructive}" />
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </HorizontalStackLayout>
                    <controls:TMPicker Title="Select Team"
                                       ItemsSource="{Binding TeamNames}"
                                       SelectedItem="{Binding SelectedTeam, Mode=TwoWay}" />
                </VerticalStackLayout>
            </Border>

            <!-- Bottom spacing for save button -->
            <BoxView HeightRequest="16" BackgroundColor="Transparent" />

        </VerticalStackLayout>
    </ScrollView>
</ContentView>
